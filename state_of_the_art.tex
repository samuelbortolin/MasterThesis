\chapter{State of the Art}
\label{cha:soa}
\vspace{0.4 cm}

In this chapter, the current state of the art is analyzed in the context of electricity data and time series forecasting methods.
In the first section, a brief introduction to the proposed standards for electricity data is presented.
Subsequently, various technologies presented in the literature for time series forecasting are discussed.
In particular, several implementations and use cases are presented.
Also, an in-depth discussion on two hot topics, Transformers and AutoML, is treated in dedicated subsections.
Furthermore, the three use cases of interest, electricity demand forecasting, consumption baseline forecasting, and electricity production forecasting, are treated more in detail in dedicated sections.
At the end of this chapter, it will be clear the context around which the proposed system is developed.
Unlike other solutions, our system is able to achieve a competitive MAPE in all three use cases with a low-computational implementation.


\section{Electricity data}
\label{sec:data}
\vspace{0.2 cm}

In this section, a discussion of electricity data and proposed standards is presented.

\cite{CHEN201798} studied the data quality of electricity consumption data in a smart grid environment.
The definition and classification of data quality issues are explained.
The data quality issues of electricity consumption data are classified into three types: noise data, incomplete data, and outlier data.
These three types of data quality issues are discussed.
The paper introduced the causes of electricity consumption outlier data and provided a review of the possible detection methods.
This is a relevant study since most industrial studies in this field use real-world data that presents these issues.

The Green Button Data\footnote{ \url{https://www.greenbuttondata.org/} } is an industry initiative in response to the 2012 White House call-to-action to provide customers easy and secure access to their energy usage information in a both consumer-friendly and computer-friendly format.
This data may include electricity, natural gas, and water usage.
Customers using this service are able to securely download their own detailed energy usage in a standard format with a simple click.
They may choose to upload their own data to a third-party application or automate the secure transfer of their own energy usage data to authorized third parties, based on affirmative customer consent and control.
It is a very nice initiative in the U.S.and services like UtilityAPI are compatible with the Green Button standard providing support for APIs and XML schemas\footnote{ \url{https://utilityapi.com/docs/greenbutton} }.

\cite{Nguyen2019} provided a case study and explained the lessons learned through the roll-out of Green Button electricity, natural gas, and water data-access initiative, in order to make readily available energy and water consumption data for consumers and third-party companies, that can assist customers while ensuring security and privacy of their data.
This paper presented a case study using the Green Button standard and the steps taken to ensure data security and privacy while enabling access to those consumption data by the consumer and third parties.
Data security and privacy were achieved through the use of the Green Button standard and subsequent implementation by the Green Button Alliance of a compliance-testing program.
Considerations and solutions were needed for data in transit, data at rest, and the authorization mechanisms for allowing unregulated third-party companies to interface directly with utilities on behalf of the consumer while ensuring the consumer maintains complete control of what is to be shared and the ability to revoke that sharing at any time.

\cite{8577770} presented a big-data-based framework for dealing with electricity consumption behavior.
It conduced an analysis of the current state-of-the-art methodologies for the extraction of electro-information.
They also analyzed in-depth data for pattern identification, relational analysis, and actions to perform on electricity usage.

\cite{WILCOX2019250} proposed a novel broker-client system architecture for big data analytics: Smart Meter Analytics Scaled by Hadoop (SMASH).
They demonstrated that SMASH is able to perform data storage, query, analysis, and visualization tasks on large data sets at a 20 TB scale.
Experimental results suggested that SMASH is able to provide a competitive and easily operable platform to manage big energy data and visualize knowledge, with the potential to provide support to data-intensive decision-making.


\section{Time series forecasting}
\label{sec:timeseries}
\vspace{0.2 cm}

In this section, the techniques for time series forecasting are presented.

Forecasting competitions were proposed to promote the development of new solutions and novel techniques.
A brief briefly review was proposed in \cite{HYNDMAN20207}.
The first and most influential forecasting competitions were, and currently are, the M-competitions\footnote{ \url{https://en.wikipedia.org/wiki/Makridakis_Competitions} }.
These competitions promoted the application of the most recent statistical (such as ARIMA), machine learning (such as SVR), and deep learning (such as LSTM) approaches developed over time to be applied to the forecasting field.
Issues like the statistical significance of the results, cheating using part of the test sets, and reproducibility of the results were addressed over the competitions.
Also, other competitions were open such as Sante Fe competitions, the KDD cup, Neural network competitions, Kaggle time series competitions, and Global energy forecasting competitions.

\cite{SPILIOTIS202037} discussed whether forecasting competition data are representative of reality.
This is a very important point since the performances of new forecasting methods are typically evaluated by exploiting data from past forecasting competitions.
However, due to their many limitations, these datasets might not be indicative.
Since obtaining a complete picture of the real world is impossible in practice, the paper proposed to use the M4 competition data as an indication of the real world.
This is reasonable since this data set is composed of many series from the business world.
The properties of this dataset representative of reality are then compared with past datasets, showing that many popular benchmarks may deviate from reality.
The main differences observed were referred to the abnormality of the data, in fact, reality data are relatively more skewed series with outliers, as well as their limited randomness\slash trend.

In \cite{BERGMEIR2012192}, Bergmeir and Ben√≠tez presented a study on the use of cross-validation for time series predictor evaluation.
They aimed to combine the evaluation of traditional forecasting procedures, on the one hand, and the evaluation of machine learning techniques on the other hand.
In fact, in traditional forecasting, a part from the end of each time series is reserved for testing, and to use the rest is used for training.
Instead, when evaluating machine learning and other regression methods, often cross-validation is used in the evaluation process without paying much attention to the fact that there are theoretical problems with respect to temporal evolutionary effects and dependencies within the data that invalidate the fundamental assumptions of cross-validation.
They suggested that the use of a blocked form of cross-validation for time series evaluation should be the standard procedure, thus using all available information and circumventing the theoretical problems.
They also affirmed that the use of cross-validation techniques led to a more robust model selection.

Relevant papers in the time series forecasting context
\cite{DEGOOIJER2006443}
\cite{Nesreen2010}
\cite{BENTAIEB20127067} 
\cite{TEALAB2018334}
\cite{Athiyarath2020}
\cite{Cerqueira2020}
\cite{SEZER2020106181}
\cite{Lim2021}
\cite{Masini2023}
\cite{ZHANG2003159}
\cite{CAO2003321}
\cite{6210391}
\cite{Oliveira2015}
\cite{Sean2017}
\cite{Borovykh2017}
\cite{LI2019104785}
\cite{DEOSANTOSJUNIOR201972}
\cite{SHEN2020302}
\cite{SMYL202075}
\cite{HEWAMALAGE2021388}
\cite{en16031371}.


\vspace{0.1 cm}
\subsection{Attention and transformers}
\label{sec:transformers}
\vspace{0.1 cm}

In this subsection, an overview on attention-based and transformers approaches is presented, with a focus on time series forecasting applications
\cite{NIU202148}
\cite{9586824}
\cite{Shih2019}
\cite{DU2020269}
\cite{HEIDARI2020626}
\cite{LIU2020113082}
\cite{9688968}
\cite{10019616}
\cite{9892274}
\cite{9676694}
\cite{Vaswani2017}
\cite{Grigsby2021}
\cite{Wu2020}
\cite{Zhou2020}
\cite{LIM20211748}
\cite{9745215}
\cite{WU2022123990}
\cite{ZHANG2022329}.


\vspace{0.1 cm}
\subsection{Automated machine learning}
\label{sec:automl}
\vspace{0.1 cm}

In this subsection, an overview on the developed Automated machine learning (AutoML) approaches is presented, with a focus on time series forecasting applications
\cite{Elshawi2019}
\cite{8995391}
\cite{9033810}
\cite{computers10010011}
\cite{HE2021106622}
\cite{9579526}
\cite{Karmaker2021}
\cite{Chen2021}
\cite{Feurer2015}
\cite{8955514}
\cite{Gijsbers2019}
\cite{9660073}
\cite{9564380}
\cite{9534091}
\cite{su142215292}
\cite{Feurer2020}
\cite{Zimmer2020}
\cite{Deng2022}.


\section{Electricity demand forecasting}
\label{sec:demandsoa}
\vspace{0.2 cm}

In this section, the techniques for electricity demand forecasting are presented.

\cite{singh2013overview} presented a review of electricity demand forecasting techniques.
They classified load forecasting into three categories:
short-term forecasts which are usually from one hour to one week,
medium forecasts which are usually from a week to a year,
and long-term forecasts which are longer than a year.
Based on the various types of studies presented, load forecasting techniques may be presented in three major groups: Traditional Forecasting techniques (regression methods, exponential smoothing, iterative reweighted least-squares), Modified Traditional Techniques (adaptive demand forecasting, AR, ARMA, ARIMA, SVM) and Soft Computing Techniques (genetic algorithms, fuzzy logic, NNs, knowledge-based expert systems).
From the work, it can be inferred that demand forecasting techniques based on soft computing methods are gaining major advantages for their effective use.
There is also a clear move towards hybrid methods, which combine two or more of these techniques.

\cite{TAYLOR200357} investigated the use of weather ensemble predictions in electricity demand forecasting from 1 to 10 days ahead.
They proposed a weather ensemble prediction by considering 51 scenarios for a weather variable.
For each scenario, they produced a scenario for the weather-related component of electricity demand.
The results showed that the average of the demand scenarios is a more accurate demand forecast than that produced using traditional weather forecasts.
The mean of the 51 scenarios is mathematically equivalent to taking the expectation over the weather-related component of the demand probability density function.
They also used the distribution of the demand scenarios to estimate the demand forecast uncertainty.

In \cite{MIRASGEDIS2006208}, Mirasgedis et al. presented how to incorporate weather into models for mid-term electricity demand forecasting.
They studied the daily and monthly electricity demand.
They noticed that the monthly model performs better thanks to the higher level of aggregation but also that the influence of weather on electricity demand is in a more aggregated way and thus may not account well for the influence of unusual or extreme weather on electricity consumption.
The temperature of the day in which electricity demand is projected, the temperature of the two previous days, and the relative humidity have been found to be the most important weather parameters that affect electricity consumption in the Greek interconnected power system.

\cite{5686767} proposed a first use of a Neural Network (NN) with the Backpropagation learning algorithm for Lao state yearly electricity demand forecasting.
They compared with a regression analysis model showing the higher effectiveness of the NN.

\cite{5518553} proposed two models for short-term Singapore electricity demand forecasting: the multiplicative decomposition model and the seasonal ARIMA Model.
Results showed that both models can accurately predict the short-term Singapore demand and that the Multiplicative decomposition model slightly outperforms the seasonal ARIMA model.

\cite{8093428} is an empirical study in which some forecasting models are developed for electricity demand using publicly available data and three models based on machine learning algorithms.
The performances of these models are compared by using different evaluation metrics.
The data consists of several measurements of the electricity market in Turkey from 2011 to 2016 and is available for different time granularities (from hourly to yearly aggregated).
According to the best result of mean absolute percentage error (MAPE), electricity demand was predicted with a 1.4 percentage error with the random forest model.

In \cite{9046493}, a modeling approach based on association rules was proposed.
Association rules are useful to describe a model in terms of cause and effect.
It did not outperform ARIMA but helped to locate the most frequent patterns of electricity consumption.

In \cite{ALMUSAYLH20181}, Al-Musaylh et al. addressed the short-term electricity demand forecasting with MARS (Multivariate Adaptive Regression Spline), SVR, and ARIMA models using aggregated demand data of Queensland, Australia.
They found out that the MARS and SVR models can be considered more suitable for short-term electricity demand forecasting when compared to the ARIMA model.
As expected, given its linear formulation in the modeling process, the ARIMA model‚Äôs performance was lower for all forecasting horizons as it generated very high forecast errors.
The study found that the MARS models were able to provide a powerful, yet simple and fast forecasting framework when compared to the SVR models.

\cite{MA20193433} presented a method based on a support vector regressor (SVR) to forecast building energy consumption in southern China.
To improve the reliability of SVR in building energy consumption prediction, multiple parameters including weather data (such as yearly mean outdoor dry-bulb temperature, relative humidity, and global solar radiation) and economic factors (such as the ratio of urbanization, gross domestic product, household consumption level and total area of the structure) are taken as inputs.

In \cite{8404313}, a RNN based time series approach for forecasting Turkish electricity load was proposed.
Recurrent Neural Networks (RNN), Long-Short Term Memory (LSTM) Networks, and Gated Recurrent Units (GRU) Networks are used.
The resulting 0.71\% MAPE of their experiments yields better results than existing methods based on ARIMA and artificial neural networks on Turkish electricity load forecasting which have 2.6\% and 1.8\% MAPE respectively.

Most of the presented techniques are considered very simple nowadays and they rely on large aggregated data, both on the number of people considered (e.g., the consumption generated by an entire country) or on a very large temporal aggregation (up to 1 year aggregated data).
Our use case is limited to the customers of a small company, from 2 to 4 thousand customers, and need to provide forecasts on an hourly basis for a one-month time horizon.

In \cite{DU2018533} a novel hybrid forecasting system was successfully developed.
It was composed of four modules: data preprocessing module, optimization module, forecasting module, and evaluation module.
In the data preprocessing module, a signal processing approach is employed to decompose, reconstruct, identify, and mine the primary characteristics of the electrical power system time series.
Optimization algorithms are also employed to optimize the parameters of these individual models in the optimization and forecasting modules.
Experimental results showed that the hybrid system can be able to satisfactorily approximate the actual value.
This is an interesting study from which to take inspiration for the system modeling structure, which can be intended for general-purpose and not just for the electrical power use case.

\cite{KIM2019328} proposed a recurrent inception convolution neural network (RICNN) that combines RNN and 1-dimensional CNN (1-D CNN).
They used the 1-D convolution inception module to calibrate the prediction time and the hidden state vector values calculated from nearby time steps.
By doing so, the inception module generates an optimized network via the prediction time generated in the RNN and the nearby hidden state vectors.
The proposed RICNN model has been verified in terms of the power usage data of three large distribution complexes in South Korea.
Experimental results demonstrate that the RICNN model outperforms the benchmarked multi-layer perception, RNN, and 1-D CNN in daily electric load forecasting (48-time steps with an interval of 30 minutes).
This is an interesting network structure that can be suited for our specific use case but has to be effective also on a wider time horizon.

In \cite{BEDI20191312}, Bedi and Toshniwal proposed a deep learning based framework to forecast electricity demand by taking care of long-term historical dependencies.
In fact, existing methods are able only of handling short-term dependencies.
The proposed approach is called D-FED and is based on a Long Short Term Memory network and a moving window based multi-input multi-output mapping approach of active learning.
It is applied to the electricity consumption data of Union Territory Chandigarh, India.
The performance of the proposed approach is evaluated by comparing the prediction results with Artificial Neural Network, Recurrent Neural Network, and Support Vector Regression models.

In \cite{MUZAFFAR20192922}, Muzaffar and Afshari have picked up electrical load data with exogenous variables including temperature, humidity, and wind speed, and used them to train a LSTM network.
It has been shown in this work that LSTM outperforms the other traditional methods such as ARMA, SARIMA, and ARMAX reducing the percentage of errors in forecasting the load time series.
From the study, they found out that LSTM can learn the seasonality patterns and the trend as well instead of extracting these features a priori.

In \cite{WEN2020106073}, Wen et al. proposed a deep learning model to forecast the load demand of aggregated residential buildings with a one-hour resolution, while considering its complexity and variability.
Hourly-measured residential load data in Austin, Texas, USA were used to demonstrate the effectiveness of the proposed model, and the forecasting error was quantitatively evaluated using several metrics.
The used model is a deep RNN model with GRU (DRNN-GRU).
This model assumes knowledge of the future weather data to make a forecast, which would affect the accuracy due to the weather uncertainty over a short to medium period.
The results showed that the proposed model forecasts the aggregated and disaggregated load demand of residential buildings with higher accuracy compared to conventional methods.

\cite{CHITALIA2020115410} presented a robust short-term electrical load forecasting framework that can capture variations in building operation, regardless of building type and location.
Nine different hybrids of recurrent neural networks and clustering are explored.
The test cases involve five commercial buildings of five different building types, i.e., academic, research laboratory, office, school, and grocery store.
Load forecasting results indicate that the deep learning algorithms implemented in the paper deliver 20-45\% improvement in load forecasting performance as compared to the current state-of-the-art results for both hour-ahead and 24-ahead load forecasting.
It is found that:
(i) the use of hybrid deep learning algorithms can take as less as one month of data to deliver satisfactory hour-ahead load prediction,
(ii) 15-minute resolution data, if available, delivers 30\% improvement in hour-ahead load forecasting,
and (iii) the formulated methods are found to be robust against weather forecasting errors.
This study gives useful insights about the quantity and granularity of data needed for a short-term prediction range, these are great findings but do not generalize to longer prediction ranges.

In \cite{WANG2020117197}, Wang et al. proposed a novel approach based on long short-term memory (LSTM) network for predicting periodic energy consumption.
They stated that this is novel since general forecasting methods do not concern periodicity.
Hidden features are extracted by the autocorrelation graph among the real industrial data.
Experiments using a cooling system under one-step-ahead forecasting are conducted to verify the performance of LSTM.
It was compared with several traditional forecasting methods, such as the autoregressive moving average model (ARMA), autoregressive fractional integrated moving average model (ARFIMA), and back propagation neural network (BPNN).
The RMSE of LSTM is 19.7\%, 54.85\%, and 64.59\% lower than BPNN, ARMA, and ARFIMA on the test data.
Furthermore, they demonstrated that the proposed algorithm had the highest generalization capability.

In \cite{WANG2020114561}, Wang et al. proposed a stacking model capable of combining the advantages of various basic prediction algorithms and transforming them into ‚Äúmeta-features‚Äù to ensure that the final model can observe datasets from different spatial and structural angles.
Load data retrieved from two educational buildings in the coastal city of Tianjin, China, is employed for the case study.
The case study buildings are made of classrooms for students and offices for university staff.
Experimental results indicated that the stacking method achieves better performance than other tested ML models (Random Forest, Gradient Boosted Decision Tree, Extreme Gradient Boosting, Support Vector Machine, and K-Nearest Neighbor) regarding accuracy, generalization, and robustness.

In \cite{SOMU2021110591}, Somu et al. presented kCNN-LSTM, a deep learning framework that operates on the energy consumption data recorded at predefined intervals to provide accurate building energy consumption forecasts.
kCNN-LSTM employs:
(i) k means clustering to perform cluster analysis to understand the energy consumption pattern\slash trend;
(ii) Convolutional Neural Network (CNN) to extract complex features with non-linear interactions that affect energy consumption;
and (iii) Long Short Term Memory (LSTM) network to handle long-term dependencies through modeling temporal information in the time series data.
The performance of kCNN-LSTM was compared with the k means variant of the state-of-the-art energy demand forecast models in terms of MSE, RMSE, MAE, and MAPE showing the efficiency of kCNN-LSTM model over other models in providing accurate energy consumption demand forecasting.

In \cite{10033079}, an attention-based deep learning model with interpretable insights into temporal dynamics is presented to forecast short-term loads.
The temporal fusion transformers (TFT) included a sequence-to-sequence model, which processes the historical and future covariates to enhance the forecasting performance.
Gated Residual Network (GRN) is applied to drop out unnecessary information and improve efficiency.
The proposed method is tested on anonymized data from a university campus.
The anomalies and missing data are imputed with the k-nearest neighbor (KNN) method.
The testing results demonstrate the effectiveness of the proposed method achieving less than 5\% MAPE.
This is an interesting work on a TFT model, which should be extended to obtain great performance also with a higher prediction range in order to be applicable to the use case treated in this thesis.

\cite{LI2023108743} presented a probabilistic forecasting method for hourly load time series based on an improved temporal fusion transformer (ITFT) model to achieve more accurate and thorough forecasting results.
Hourly load time series was reconstructed into multiple day-to-day load time series at different hour points.
ITFT model replaces the long short-term memory (LSTM) with a gated recurrent unit (GRU) to learn long-term dependence more efficiently.
Quantile constraints and prediction interval (PI) penalty terms were incorporated into the original quantile loss function to prevent quantile crossover and construct more compact prediction intervals (PIs).
The results show that the proposed method is explanatory and can significantly improve the reliability and compactness of probabilistic load forecasting results compared with other popular methods, such as Quantile regression neural network (QRNN) and temporal convolutional network (TCN).


\section{Consumption baseline forecasting}
\label{sec:baselinesoa}
\vspace{0.2 cm}

In this section, the techniques for consumption baseline forecasting are presented.

The EU research project S3C developed and tested different guidelines and tools, of particular interest is the guideline on how to create a consumption baseline\footnote{ \url{https://www.smartgrid-engagement-toolkit.eu/fileadmin/s3ctoolkit/user/guidelines/GUIDELINE_HOW_TO_CREATE_A_CONSUMPTION_BASELINE.pdf} }.
The baseline is the reference used to assess the effects of the demand response of a given consumer or set of consumers.
The demand response effect is defined as the difference between the metered consumption and the baseline calculation.
They explained that the baseline calculation method consists of three criteria:
i) data selection method,
ii) estimation method,
and iii) result adjustment.
They pointed out that the combination of these criteria depends on user consumption, weather dependency (including seasonal behavior), and load behavior and should all together fit the user consumption pattern.

In \cite{DEB2017902}, Deb et al. presented a comparison of different time series forecasting techniques for building energy consumption: ANN, ARIMA, SVM, Case-Based Reasoning (CBR), Fuzzy time series, Grey prediction model, Moving average and exponential smoothing (MA \& ES), K - Nearest Neighbor prediction method (kNN) and Hybrid models.
Also, hybrid models are reviewed and analyzed, i.e., the combination of two or more forecasting techniques.
The various combinations of the hybrid model are found to be the most effective in time series energy forecasting for single buildings.

\cite{AMBER2018886} aimed to compare the prediction capabilities of five different intelligent system techniques in forecasting the electricity consumption of an administration building.
These five techniques are; Multiple Regression (MR), Genetic Programming (GP), Artificial Neural Network (ANN), Deep Neural Network (DNN), and Support Vector Machine (SVM).
The prediction models are developed based on five years of observed data of five different additional parameters such as solar radiation, temperature, wind speed, humidity, and weekday index.
The weekday index is demonstrated as an important parameter since makes it possible to differentiate between working and non-working days.
ANN performs better than all other four techniques with a Mean Absolute Percentage Error (MAPE) of 6\% whereas MR, GP, SVM, and DNN have MAPE of 8.5\%, 8.7\%, 9\%, and 11\%, respectively.

Ahmad et al. in \cite{AHMAD2018301} focused on reviewing data-driven approaches and large-scale building energy predicting-based approaches.
A thorough review of different techniques is presented in the study, including ANN, SVM, clustering-based, statistical, and machine learning-based approaches.

\cite{FAN2019700} investigated the performance of different strategies for multi-step ahead building energy predictions.
The results of the study demonstrated the potential of recurrent models for short-term building energy predictions.
This study provided references for developing advanced deep learning models for practical applications.

\cite{LUSIS2017654} studied how calendar effects, forecasting granularity, and the length of the training set affect the accuracy of a day-ahead load forecast for residential customers.
They demonstrated that regression trees, neural networks, and support vector regression yielded similar average RMSE results, but also that statistical analysis showed that the regression trees technique is significantly better.
The use of historical load profiles with daily and weekly seasonality, combined with weather data, leaves the explicit calendar effects with very low predictive power.
It was also found that one year of historical data is sufficient to develop a load forecast model for residential customers as a further increase in the training dataset has a marginal benefit.
In the setting studied in the paper, it was shown that forecast errors can be reduced by using a coarser forecast granularity.
That is expected since aggregating over time will reduce the variability of the data, as also demonstrated in this thesis, good results on hourly forecasts will be almost impossible to achieve and instead by using a daily forecast results will be more acceptable.

In \cite{7463810}, Kim et al. examined a number of different data mining techniques and demonstrated Gradient Tree Boosting (GTB) to be an effective method to build baseline electricity usage.
They trained GTB on data prior to the introduction of new pricing schemes and applied the known temperature following the introduction of new pricing schemes to predict electricity usage with the expected temperature correction.
Their experiments and analyses showed that the baseline models generated by GTB capture the core characteristics over the two years with the new pricing schemes.
In contrast to the majority of regression-based techniques which fail to capture the lag between the peak of daily temperature and the peak of electricity usage, the GTB-generated baselines are able to correctly capture the delay between the temperature peak and the electricity peak.
Furthermore, subtracting this temperature-adjusted baseline from the observed electricity usage, they found that the resulting values are more amenable to interpretation, which demonstrates that the temperature-adjusted baseline is indeed effective.
Instead of providing accurate short-term forecasts, their baseline model aims to capture intraday characteristics that persist for years.

In \cite{PLATON201510}, Platon et al. developed predictive models by using ANN and case-based reasoning (CBR) for producing hourly predictions of a building‚Äôs electricity consumption.
CRB is based on the concept that the current trend of the building's electrical use can be approximated using past trends occurring at similar conditions.
They showed the supremacy of ANN over CBR in doing the predictions.

In \cite{7576207}, Jie et al. proposed a baseline load forecasting and optimization method based on non-demand-response factors, considering the effects of non-demand-response factors on customer load characteristics and customer baseline load (CBL) forecasting.
The proposed method combines non-demand-response factors mining, similar days selecting, and CBL calculating.
A combined calculation model is adopted to predict the CBL.
The case study reveals the greater accuracy of this method compared to average, linear regression, and neural network methods.

Forecast at the household level is also getting more and more popular in smart building control and demand response program.
This popularity inspired Dong et al. to develop in \cite{DONG2016341} a hybrid model to address the problem of residential hour and day ahead load forecasting through the integration of data-driven techniques.
They evaluated five different machine learning algorithms: artificial neural network (ANN), support vector regression (SVR), least-square support vector machine (LS-SVM), Gaussian process regression (GPR), and Gaussian mixture model (GMM).
They applied these models to four residential data sets obtained from smart meters.
A subdivision of air conditioning (AC) consumptions and not-AC was possible and this led to better results with respect to the total consumption.
The final results showed that the hybrid model led to improvements compared to the other machine learning algorithms for both hour-ahead and 24-h ahead predictions.

In \cite{MOCANU201691}, Mocanu et al. investigated two newly developed stochastic models for time series prediction of energy consumption, namely Conditional Restricted Boltzmann Machine (CRBM) and Factored Conditional Restricted Boltzmann Machine (FCRBM).
The assessment of the two models is made on a benchmark dataset consisting of almost four years of one-minute resolution electric power consumption data collected from an individual residential customer.
As the prediction horizon is increasing, FCRBMs and CRBMs seem to be more robust and their prediction error is typically half that of the ANN.
In addition from other experiments, it can be observed that all methods perform better when predicting the aggregated active power consumption, than predicting the demand of intermittent appliances (e.g., electric water heater) recorded from sub-meterings.

In \cite{ALOBAIDI2018997}, a robust ensemble model was proposed to predict day-ahead mean daily electricity consumption on the household level.
The proposed ensemble learning strategy utilized a two-stage resampling plan, which generated diversity-controlled but random resamples that were used to train individual ANN members.
Experimental results on a case study showed that the proposed ensemble is able to generate better estimates compared to ANN models and the Bagging ensemble.

To counter the high nonlinearity between inputs and outputs of building energy consumption prediction models, in \cite{ZHONG2019403} a novel vector field-based support vector regression method is proposed.
Through multi-distortions in the sample data space or high-dimensional feature space mapped by a vector field, the optimal feature space is found, in which the high non-linearity between inputs and outputs is approximated by linearity.
A large office building in a coastal town in China is used for a case study, and its summer hourly cooling load data are used as energy consumption data.
The proposed method ensures high accuracy, generalization ability, and robustness for building energy consumption prediction.

\cite{SHAO2020102128} studied and analyzed the energy consumption of hotel buildings by developing a support vector machine energy consumption prediction model.
The support vector machine model took as input variables the weather parameters and operating parameters of the hotel air-conditioning system.
They selected as the kernel function the RBF kernel function and optimized the parameters of the kernel for finding the best accuracy for the model predictions.
The MSE value of the final model prediction in the case study was 2.22\% and R2 was 0.94.
This use case is different from the standard single-building forecasts since a hotel includes different rooms and aggregates the consumption over them, then it is more influenced by periods of the year where there could be more or fewer customers that require different levels of demand.
Moreover, in this case, hotel parameters like the air conditioning system are available and help in reducing the overall forecast error.

In \cite{WANG201910}, a probabilistic load forecasting method for individual consumers is proposed to handle the variability and uncertainty of future load profiles.
Pinball loss-guided long short-term memory (LSTM) network is used to model both the long-term and short-term dependencies within the load profiles.
Forecasting for both residential and commercial consumers is tested.
Experimental results over different customers showed that the proposed method had superior performance over traditional methods such as quantile regression neural network, gradient boosting regression tree, and traditional LSTM.

\cite{CAI20191078} aimed to use deep learning-based techniques for day-ahead multi-step load forecasting in commercial buildings.
The RNN and CNN models have been proposed and formulated under both recursive and direct multi-step manners.
The performances are compared with the Seasonal ARIMAX model.
The gated 24-h CNN model, performed in a direct multi-step manner, proves itself to have the best performance, improving the forecasting accuracy by 22.6\% compared to that of the seasonal ARIMAX, demonstrating the supremacy of deep learning models in this kind of use cases.

In \cite{KIM201972}, Kim and Cho proposed a CNN-LSTM neural network for extracting spatial and temporal features to effectively predict housing energy consumption.
This is demonstrated to be an effective architecture since the CNN layer can extract the features between several variables affecting energy consumption, and the LSTM layer is able to model temporal information of irregular trends in time series components.
The CNN-LSTM method achieved very good prediction performance for housing energy consumption that previously was even difficult to predict.
It recorded the smallest value of root mean square error compared to the conventional forecasting methods for the dataset on individual household power consumption.
It managed to predict complex electric energy consumption and obtained the highest performance in all cases of minutely, hourly, daily, and weekly unit resolutions compared to other methods.
They stated also that having household characteristics such as occupancy and behavior of the residents might have a large influence on predicting electric energy consumption and could improve the performance of the model.

In \cite{SOMU2020114131}, Somu et al. proposed a hybrid model for building energy consumption forecasting using long short-term memory networks.
In particular, they presented eDemand, which is an energy consumption forecasting model which employs long short-term memory networks and an improved sine cosine optimization algorithm for accurate and robust building energy consumption forecasting.
Live energy consumption data was obtained from an academic building, the Indian Institute of Technology in Bombay, and it is used to forecast short-term, mid-term, and long-term energy consumption.
The conducted experiments revealed that the proposed model outperforms the state-of-the-art energy consumption forecast models according to different evaluation metrics.

Also, a study on deep reinforcement learning techniques for building energy consumption forecasts was proposed in \cite{LIU2020109675}.
Very little is known about DRL techniques in forecasting building energy consumption.
A case study of an office building was presented and three commonly-used DRL techniques to forecast building energy consumption are used: Asynchronous Advantage Actor-Critic (A3C), Deep Deterministic Policy Gradient (DDPG), and Recurrent Deterministic Policy Gradient (RDPG).
The objective of the paper was to investigate the potential of DRL techniques in building energy consumption predictions.
A comprehensive comparison between the proposed DRL models and common supervised models was provided.
Experimental results showed that DDPG outperformed supervised models both in single-step ahead prediction and multi-step ahead prediction.
RDPG model did not have advantages over DDPG in single-step ahead prediction, yet led to evident accuracy improvement in multi-step ahead prediction.
A3C led to poor performances both in single-step ahead prediction and multi-step ahead prediction, indicating that the technique is not adequate for forecasting building energy consumption.

As demonstrated by most of the paper analyzed the forecasts for a single customer is a more complicated use case compared to energy demand forecast over a customer base.
Single customer data is more noisy and very few works consider a single habitation, most of them consider commercial buildings, offices, or schools which reduce the level of noise.
Doing a model for every single user is not very scalable (high computational complexity) and a model that is able to use the information about a customer as features and can generalize over a customer base would be the best solution for an energy company.
The next few recent works try to use novel and advanced techniques to try out this approach.

A novel deep ensemble learning based probabilistic load forecasting framework is proposed in \cite{YANG2019116324} to quantify the load uncertainties of individual customers.
The presented framework employed the profiles of different customer groups and integrated them into the understanding of the task.
Specifically, customers are clustered into separate groups based on their profiles and a multitask representation learning approach is employed on these groups simultaneously.
This technique led to better feature learning across groups and it was particularly useful to improve the performance of predicting residential demand response and managing home energy in smart grids.
However, this technique in order to be applicable needs customers‚Äô personal information and a large customer base in order to be effective.

\cite{ZANG2021120682} proposed a novel day-ahead residential load forecasting method based on feature engineering, pooling, and a hybrid deep learning model.
Feature engineering was performed using two-stage preprocessing on data from each user, i.e., first decomposition and then multi-source input dimension reconstruction.
Subsequently, the pooling operation was adopted to merge data from both the target user and its interconnected users, in a descending order based on mutual information.
Finally, a hybrid model with two input channels was developed by combining long short-term memory (LSTM) with a self-attention mechanism (SAM).
The case studies were conducted on a practical dataset containing multiple residential users.
The proposed load forecasting method achieved the best performance with a four-user data pool, 49 time steps, and 24 feature dimensions.
The optimal performance corresponded to 15.33\%, 56.86 kW, and 82.50 kW in terms of MAPE, MAE, and RMSE, respectively.
The proposed method was demonstrated to be an effective choice for day-ahead residential load forecasting.

\cite{NAZIR2023100888} proposed a daily, weekly, and monthly energy consumption prediction model for single customers by using a Temporal Fusion Transformer (TFT).
The study used a TFT which considered both primary and valuable data sources, and batch training techniques.
A data set of 169 customers have been considered in the study and the TFT was tested on data from only one customer for demonstrating the effectiveness of the customer-based predictive model, which has the advantage that does not depend on overall energy consumption.
The model‚Äôs performance has been related to the Long Short-Term Memory (LSTM), LSTM interpretable, and Temporal Convolutional Network (TCN) models.
The overall symmetric mean absolute percentage error (sMAPE) of LSTM, LSTM interpretable, TCN, and proposed TFT remained at 29.78\%, 31.10\%, 36.42\%, and 26.46\%, respectively.
The sMAPE of the TFT has proved that the model has performed better than the other deep learning models.
This is a very smart recent work in which by using time series of also different customers is able to improve the quality of forecasts with respect to other models for a single customer.


\section{Electricity production forecasting}
\label{sec:productionsoa}
\vspace{0.2 cm}

In this section, the techniques for electricity production forecasting are presented.

PVGIS\footnote{ \url{https://joint-research-centre.ec.europa.eu/pvgis-online-tool_en} } is a tool of the EU-Joint Research Center that provides information about solar radiation and photovoltaic (PV) system performance for any location in Europe and Africa, as well as a large part of Asia and America.
PVGIS uses high-quality solar radiation data obtained from satellite images, as well as ambient temperature and wind speed from climate reanalysis models.
It is a free tool that allows specifying the details of a PV plant to obtain its potential generation.
It is useful to get an indication of the potential generation but it is not accurate as the methods presented in the literature.
In fact, specific methods can focus on specific plants taking into account historical data from which to extract the specific production performance and consider the most recent weather forecasts available.

\cite{INMAN2013535} reviewed the theory behind the forecasting methodologies, and presented a number of successful applications of solar forecasting methods for both the solar resource and the power output of solar plants at the utility-scale level.
Some examples of the presented approaches are Regressive methods, Artificial Neural Networks, Numerical Weather Prediction, and hybrid methods incorporating two or more techniques.

Zamo et al. in 2014 presented a pair of articles proposing a benchmark of statistical regression methods for short-term forecasting of photovoltaic electricity production.
The first one treated deterministic forecast of hourly production \cite{ZAMO2014792}, and the second one probabilistic forecast of daily production \cite{ZAMO2014804}.
The proposed benchmark designated random forests as the best forecast model for hourly PV production with a short lead time (from 28 to 45 h).
Their results also suggested that the RMSE can be reduced to about 5.8\% by first forecasting the production for each individual power plant and then summing these forecasts up.
For probabilistic forecasts of 2 days ahead daily production, QR-based (quantile regression based) forecasts performed significantly better than the climatology, with a CRPS (continuous ranked probability score) lowered by up to 50\%.
For most power plants, a QR-based forecast performs better than the others.
But the most accurate forecast may vary from one power plant to another and with the number of forecast quantiles.

\cite{ANTONANZAS201678} presented a review of photovoltaic power forecasting up to 2016.
Forecasting techniques such as regressive methods, ANN, k-NN, SVM, RF, and hybrid methods are presented.
Most recent papers used machine learning techniques, due to the ease of modeling without the need of knowing PV plant characteristics, since these approaches are able to learn them from data.
Also, spatial and temporal horizons and performance metrics are discussed.
The forecast horizon where most research has been done is the day ahead.
The reason is that most of the energy is traded in day-ahead markets when planning and unit commitment takes place.
They discussed that spatial averaging is very used since it reduces the variability of the solar resource and generates regional forecasts that are more reliable than single-site ones.
This is caused by the smoothing effect, which cancels errors with opposite signs in different PV plants.

Barbieri et al. in \cite{BARBIERI2017242} found out that ANNs and SVM are appropriate approaches for short-term horizons and numerical weather prediction (NWP) are better suited for longer horizons.
In fact, while a probabilistic method based on historical data may be valuable for very long-term forecasts, such an approach cannot take into consideration the complex variations of the cloud cover causing short-term sunlight disruptions.
Only a deterministic atmospheric modeling approach can deal with the stochastic changes of solar radiance during the day.
Within this type of model, NWP data-based models are well adapted for day-ahead forecasts but suffer from a too coarse temporal resolution.
Sky imagers are a precious tool to identify cloud types and anticipate the impact of shading on PV power generation.
They concluded by introducing some future works as the elaboration of algorithms that can calculate cloud cover and classify clouds using online data and a fine sampling period.
In addition, measuring precisely the effects of each type of cloud on solar irradiance could greatly help in improving the results.

In \cite{DAS2018912}, Das et al. based on the studies dated up to 2018 found out that ANN and SVM-based forecasting models performed well under rapid and varying environmental conditions.
In addition, most of the studies adopted numerous techniques to develop their forecasting model in order to obtain better accuracy.
Moreover, a considerable number of studies classified the forecasted day into different categories based on the weather conditions using several techniques and then developed the forecasting model.
However, the range of the observed error was remarkably high due to different weather conditions.
For performing good predictions and minimizing errors, the separate sub-model for each weather condition has to perform well.

\cite{SOBRI2018459} classified solar PV forecasting methods into three major categories, that are time-series statistical, physical, and ensemble methods.
Among the most used methods, there are Artificial Neural Network (ANN) and Support Vector Machine (SVM) thanks to their ability in solving complex and non-linear forecasting models.
The metrics assessment shows that Artificial Intelligence (AI) models could decrease the error compared to other statistical approaches.
The ensemble methods have been introduced recently and thanks to their ability to merge linear and non-linear techniques enhanced the accuracy and performance in comparison with individual models.
The standard metrics that are used for evaluating solar prediction accuracy were presented for specific applications, they allow the selection of the appropriate solar forecasting approaches to ensure better performance.

\cite{DEFREITASVISCONDI201954} presented a literature review on big data models for solar photovoltaic electricity generation forecasts, aiming to evaluate the most applicable and accurate state-of-art techniques to the problem.
They included also the motivation behind each project proposal, and the characteristics and quality of data used to address the problem, among other issues.
They affirmed that the prediction of solar electricity generation is currently an ongoing academic research question.
Machine learning is widely used, and approaches based on neural networks are considered the most accurate.
Extreme learning machine (ELM) was also a great addition and it has reduced training time and raised precision.

\cite{AHMAD2018465} investigated the accuracy, stability, and computational cost of random forest (RF) and extra trees (ET) techniques for predicting the hourly PV generation output.
They compared the performance of the proposed methods with support vector regression (SVR).
They proved that all developed models have comparable predictive power and are equally applicable for predicting hourly PV output.
Despite their comparable predictive power, ET outperformed RF and SVR in terms of computational cost.
They concluded by affirming that the stability and algorithmic efficiency of ET makes this technique an ideal candidate for wider adoption in PV output forecasting.

In \cite{AHMED2020109792}, Ahmed et al. reviewed and evaluated contemporary PV solar power forecasting techniques.
They noticed through correlation analysis that solar irradiance is the most correlated feature with Photovoltaic output and consequently weather classification and cloud motion study are crucial operations for optimal results.
In addition, they stated that the best data-cleaning processes are normalization and wavelet transforms, and that augmentation using generative adversarial networks is recommended for network training and forecasting.
Furthermore, they analyzed also that the optimization of inputs and network parameters can be done by using genetic algorithms and particle swarm optimization.
They determined that ensembles of artificial neural networks are the best approach for forecasting short-term photovoltaic power.

\cite{9848724} examined the performance of the LSTM method in Turkey's electricity production estimation and to determine the optimization technique that provides the best performance in the LSTM estimation method.
It was observed that the energy production estimation of LSTM and Adam optimization technique achieved successful results.

In \cite{GELLERT2019546}, Gellert et al. proposed and evaluated a context-based technique to anticipate electricity production and consumption in buildings.
They focused on a household with photovoltaics and an energy storage system.
They analyze the efficiency of Markov chains, stride predictors, and also their combination into a hybrid predictor in modeling the evolution of electricity production and consumption.
Experimental results showed that the best predictor is the Markov chain configured with an electric power history of 100 values, a context of one electric power value, and an interval size of 1.

A genetic algorithm-based support vector machine (GASVM) model for short-term power forecasting of residential-scale PV systems is proposed in \cite{VANDEVENTER2019367}.
The GASVM model classified the historical weather data using an SVM classifier initially and later it is optimized by the genetic algorithm using an ensemble technique.
Experimental results demonstrated that the proposed GASVM model outperformed the conventional SVM model by a difference of about 669.624W in the RMSE value and 98.7648\% of the MAPE error.

In \cite{ZHOU2020117894}, a hybrid model (SDA-GA-ELM) based on extreme learning machine (ELM), genetic algorithm (GA), and customized similar day analysis (SDA) has been developed to predict hourly PV power output.
In the SDA, the Pearson correlation coefficient is employed to measure the similarity between different days based on five meteorological factors, and the data samples similar to those from the target forecast day are selected as the training set of ELM.
In the ELM, the optimal values of the parameters are searched by the GA to improve the prediction accuracy.
The results show that the SDA-GA-ELM model has higher accuracy and stability than other tested approaches in day-ahead PV power prediction, such as ELM, SVM, SDA-ELM, and SVM-ELM.

\cite{9248865} presented case studies on forecasting PV power production and electricity demand in Portugal.
They studied an ensemble of different machine learning methods (SVM, Random Forest, LSTM, and ARIMA) to exploit the growing collection of energy supply and demand records.
The ensemble used only electricity data to forecast since only this data is available online for any forecasting horizon.
The ensemble method was based on offline training and online forecasting, by applying the most recent power measurements to trained models.
The different machine learning methods performed different non-linear transformations to the same electricity data, thus introducing diversity in the ensemble.
To assess the forecasting performance of the system, they considered two forecasting horizons relevant to the Internal Electricity Market, namely 36 hours ahead, relevant to the single day-ahead coupling, and 2 hours ahead, relevant to the single intraday coupling.
The forecasting performance using only electricity data is compared with state-of-the-art models and improves the reference accuracy in their case studies.
Since the ensemble relies only on energy data, the results showed that machine learning methods are useful to exploit energy big data for efficient energy forecasting systems.
As demonstrated by other papers, weather information such as solar irradiance has an high correlation with energy production, and when studying a few plants, instead of all the ones in Portugal, this information has a relevant impact on performance.

A novel hybrid method for deterministic PV power forecasting based on wavelet transform (WT) and deep convolutional neural network (DCNN) is proposed in \cite{WANG2017409}.
WT is used to decompose the original signal into different frequency series.
DCNN is employed to extract the nonlinear features and invariant structures exhibited in each frequency.
A probabilistic PV power forecasting model that combines the proposed deterministic method and spine quantile regression (QR) is developed to statistically evaluate the probabilistic information in PV power data.
Statistical results showed that the average MAPE, RMSE, and MAE of the proposed deterministic model outperformed the compared benchmarks in terms of seasons, forecasting horizons, and PV power locations.

Day-ahead power output time-series forecasting methods are proposed in \cite{GAO2019115838}, in which the ideal weather type and non-ideal weather types have been separately discussed.
For ideal weather conditions, a forecasting method is proposed based on meteorology data of the next day using long short term memory (LSTM) networks.
For non-ideal weather conditions, time-series relevance and specific non-ideal weather type characteristic are considered in the LSTM model by introducing adjacent day time-series and typical weather type information.
Specifically, daily total power, which is obtained by the discrete grey model (DGM), is regarded as input variables and applied to correct power output time-series prediction.
Prediction performance comparison between proposed methods with traditional algorithms revealed that the RMSE accuracy of forecasting methods based on LSTM networks can reach 4.62\% for ideal weather conditions.
For non-ideal weather conditions, the dynamic characteristic is effectively described by proposed methods and the proposed methods obtained superior prediction accuracy.
This is an interesting study on how to treat the problem in two subcases, however,  for real applications, a single network able to adapt to weather conditions by itself is needed.

In \cite{WANG2019113315}, a convolutional neural network, a long short-term memory network, and a hybrid model based on convolutional neural network and long short-term memory network models were proposed by Wang et al and they are applied to the data of the DKASC college photovoltaic system.
The results showed that when the input sequence is increased, the accuracy of the model is also improved, and the prediction effect of the hybrid model is the best, followed by that of the convolutional neural network.
While the long short-term memory network had the worst prediction effect, the training time was the shortest.

In \cite{WANG2019116225}, a hybrid deep learning model (LSTM-Convolutional Network) is proposed and applied to photovoltaic power prediction.
In the proposed hybrid prediction model, the temporal features of the data are extracted first by the long short term memory network, and then the spatial features of the data are extracted by the convolutional neural network model.
The results showed that the hybrid prediction model had a better prediction effect than the single prediction models in isolation, and the proposed hybrid model is also better than the Convolutional-LSTM Network (extract the spatial characteristics of data first, and then extract the temporal characteristics of data).

A hybrid deep learning model combining wavelet packet decomposition (WPD) and long short-term memory (LSTM) networks is proposed in \cite{LI2020114216}.
The hybrid deep learning model is utilized for one-hour-ahead PV power forecasting with five-minute intervals.
WPD is first used to decompose the original PV power series into sub-series.
After the decomposition, four independent LSTM networks are developed for the sub-series.
Finally, the results predicted by each LSTM network are reconstructed and a linear weighting method is employed to obtain the final forecasting results.
Experimental results show that the proposed hybrid deep learning model exhibits superior performance in both forecasting accuracy and stability with respect to LSTM, RNN, GRU, and MLP.

In \cite{MELLIT2021276}, different kinds of deep learning neural networks (DLNN) for short-term output PV power forecasting have been developed and compared: Long Short-Term Memory (LSTM), Bidirectional-LSTM (BiLSTM), Gated Recurrent Unit (GRU), Bidirectional-GRU (BiGRU), One-Dimension Convolutional Neural Network (CNN1D), as well as other hybrid configurations such as CNN1D-LSTM and CNN1D-GRU.
A database of the PV power produced by the microgrid installed at the University of Trieste (Italy) is used to train and comparatively test the neural networks.
The performance has been evaluated over four different time horizons, for one-step and multi-step ahead.
The results show that the investigated DLNNs provide very good accuracy, particularly in the case of a 1-minute time horizon with one-step ahead (correlation coefficient is close to 1), while for the case of multi-step ahead (up to 8 steps ahead) the results are found to be acceptable (correlation coefficient ranges between 96.9\% and 98\%).
The new advanced deep NN algorithms are able to lead to acceptable accuracy in the case of cloudy days.
However, even though the models have great potential for fine time granularity, these time ranges are quite limited and they should be proved to be effective also on longer ranges to be used by PV plant owners.

\cite{en15145232} aimed to predict hourly day-ahead PV power generation by applying the Temporal Fusion Transformer (TFT) model.
TFT incorporates an interpretable explanation of temporal dynamics and high-performance forecasting over multiple horizons.
The proposed forecasting model has been trained and tested using data from six different facilities located in Germany and Australia.
The results have been compared with other algorithms like Auto-Regressive Integrated Moving Average (ARIMA), Long Short-Term Memory (LSTM), Multi-Layer Perceptron (MLP), and Extreme Gradient Boosting (XGBoost).
The use of TFT has been shown to be more accurate than the rest of the algorithms in forecasting PV generation in the tested different facilities.
The importance of the decoder and encoder variables has been also calculated, revealing that solar horizontal irradiation and the zenith angle are the key variables for the model.
This model was proved to be effective also in this task, showing the superiority of the TFTs over standard DL models, even though is quite more complex and requires a larger amount of data to achieve good prediction results.
